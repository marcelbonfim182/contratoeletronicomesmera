<div data-role="view" data-title="Contratos assinados" data-layout="main" data-model="APP.models.home" data-init="mobileListViewPullToRefresh" >
  
        <header data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-align="left" data-icon="add" data-role="button"  data-rel="modalview" href="#modalview-add"></a>
            <a data-align="right" data-role="button" class="nav-button" href="#/">Index</a>
        </div>
    </header>
    
    
    <h1 data-bind="html: title"></h1>
  
    <ul  data-role="listview" data-style="inset" id="pull-to-refresh-listview" class="pdflist">
    </ul>
    
        <script>
      
  $("#pull-to-refresh-listview").kendoMobileListView({
    dataSource: dataSource,
    pullToRefresh: true,
    appendOnRefresh: true,
    template: $("#pull-to-refresh-template").text(),
    pullParameters: function(item) {
        //item is the first data item in the ListView
        return {
            since_id: item.id_str,
            page: 1
        };
    }
});
            
            
       window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);

function onFileSystemSuccess(fileSystem) {

var tmpPath = "contratos/";

fileSystem.root.getDirectory(tmpPath, {create: true, exclusive: false}, getDirSuccess, fail);           
}

            
function fail(error) {
    alert("Failed to list directory contents: " + error.code);
}            
    
            
            
            function readerSuccess(entries) {
    var i;
    for (i=0; i<entries.length; i++) {
        console.log(entries[i].name);
        $(".pdflist").append($("<li><a href='"+entries[i].toURL()+"' class='callpdf'>"+ entries[i].name + "</a></li>"));
        $(".pdflist").append($("<button href='"+entries[i].toURL()+"' onclick='sharefile(this);'>Share PDF</button>"));
    }
}

            

function getDirSuccess(dirEntry) {

// Get a directory reader
var directoryReader = dirEntry.createReader();

// Get a list of all the entries in the directory
directoryReader.readEntries(readerSuccess,fail);
}
            
            
            
            

   function sharefile(item){
          var pegaurl = $(item).attr("href");
          //alert(pegaurl);
          window.plugins.socialsharing.share('Prestação de Serviço fotos instatâneas', 'Contrato Mesmera Comuncação', pegaurl);    
             
  }            
       
        
    </script>   
    
    
</div>